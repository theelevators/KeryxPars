#!/bin/bash

# KeryxPars Benchmarks Runner Script
# Usage: ./run-benchmarks.sh [category]

echo "??????????????????????????????????????????????????????????????"
echo "?           KeryxPars HL7 Parser Benchmarks                  ?"
echo "??????????????????????????????????????????????????????????????"
echo ""

# Check if category parameter is provided
CATEGORY=$1

if [ -z "$CATEGORY" ]; then
    echo "Running ALL benchmarks..."
    echo ""
    dotnet run -c Release --exporters json html markdown
else
    echo "Running benchmarks: $CATEGORY"
    echo ""
    dotnet run -c Release --filter "*$CATEGORY*" --exporters json html markdown
fi

echo ""
echo "??????????????????????????????????????????????????????????????"
echo "?                  Benchmark Complete!                       ?"
echo "??????????????????????????????????????????????????????????????"
echo ""
echo "Results saved to: BenchmarkDotNet.Artifacts/"
echo ""
echo "Available categories:"
echo "  - ParserComparison   : Compare against third-party parsers"
echo "  - Memory             : Memory allocation tests"
echo "  - Deserialization    : Parse performance tests"
echo "  - Serialization      : Write performance tests"
echo ""
echo "Example: ./run-benchmarks.sh ParserComparison"
